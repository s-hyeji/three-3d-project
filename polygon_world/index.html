<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>POLYGON WORLD</title>
  <link rel="stylesheet" href="../common/common.css">
  <link rel="stylesheet" href="./css/index.css">

  <script type="importmap">
    {
      "imports" : {
        "three" : "../node_modules/three/build/three.module.js",
        "OrbitControls" : "../node_modules/three/examples/jsm/controls/OrbitControls.js",
        "gsap" : "../node_modules/gsap/index.js"
      }
    }
  </script>
</head>

<body>
  <div id="wrap">
    <div class="start">
      <p class="selectText">도형을 선택해 주세용</p>
      <div class="polygonSelectButtons">

        <div class="reset"></div>
        <!-- <div class="test"> dddd </div> -->
        <div class="btn_square" data-select="square">정사각형</div>
        <div class="btn_triangle" data-select="triangle">정삼각형</div>
        <div class="btn_circle" data-select="circle">원</div>
      </div>
    </div>
    <section class="contentArea">
      <fieldset class="controllerBox">
        <legend>옵션 설정</legend>
        <label class="controll_toggle camera">
          <p>둘러보기</p>
          <input type="checkbox" checked>
          <span class="check_toggle"></span>
        </label>
        <label class="controll_toggle light">
          <p>빛</p>
          <input type="checkbox">
          <span class="check_toggle"></span>
        </label>
        <label class="controll_toggle trans">
          <p>투명</p>
          <input type="checkbox">
          <span class="check_toggle"></span>
        </label>
        <div class="controll_color">
          <p>면 색상</p>
          <div class="select_color"></div>
          <ul class="sub_colorSelectBox">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
          </ul>
        </div>
      </fieldset>
    </section>
  </div>

  <script type="text/javascript" src="../common/scale.js"></script>
  <script type="module">
    import { startWorld } from './js/index.js';

    document.addEventListener('DOMContentLoaded', function () {
      const start = document.querySelector(".start");
      const selectBtns = document.querySelectorAll(".polygonSelectButtons [data-select]");
      const contentArea = document.querySelector(".contentArea");
      const controller = document.querySelector(".controllerBox");
      const toggleBtns = controller.querySelectorAll(".controll_toggle");

      let selectedBtn;
      let selectedType;
      let checkbox

      // 첫 화면 버튼
      selectBtns.forEach(function (btn) {
        btn.addEventListener("click", function () {
          selectedBtn = this;
          selectedType = this.getAttribute('data-select');
          contentArea.setAttribute("data-type", selectedType);

          selectBtns.forEach(e => e.classList.remove("on"));
          selectedBtn.classList.add("on");

          start.classList.add("selected");

          startWorld(selectedType, selectedBtn);
        });
      });

      // 옵션박스
      toggleBtns.forEach(function (btn) {
        btn.addEventListener("change", function () {
          checkbox = this.querySelector("input");
          if (checkbox.checked) {
            console.log("ON");
          } else {
            console.log("OFF");
          }
        });
      });
    });
  </script>
</body>

</html>